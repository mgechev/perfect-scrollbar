/*! perfect-scrollbar - v0.4.5
* http://noraesae.github.com/perfect-scrollbar/
* Copyright (c) 2013 HyeonJe Jun; Licensed MIT */
(function(e){var t={wheelSpeed:10,wheelPropagation:!1};e.fn.perfectScrollbar=function(r,o){var l=e.extend(!0,{},t);if("object"==typeof r?e.extend(!0,l,r):o=r,"update"===o)return e(this).data("perfect-scrollbar-update")&&e(this).data("perfect-scrollbar-update")(),e(this);if("destroy"===o)return e(this).data("perfect-scrollbar-destroy")&&e(this).data("perfect-scrollbar-destroy")(),e(this);if(e(this).data("perfect-scrollbar"))return e(this).data("perfect-scrollbar");var n,s,a,c,i,p,u,f,d=e(this).addClass("ps-container"),h=e(this).children(),g=e("<div class='ps-scrollbar-x'></div>").appendTo(d),v=e("<div class='ps-scrollbar-y'></div>").appendTo(d),b=parseInt(g.css("bottom"),10),m=parseInt(v.css("right"),10),w=function(){var e=parseInt(f*c/s,10);d.scrollTop(e),g.css({bottom:b-e})},T=function(){var e=parseInt(p*a/n,10);d.scrollLeft(e),v.css({right:m-e})},y=function(){n=d.width(),s=d.height(),a=h.outerWidth(!1),c=h.outerHeight(!1),a>n?(i=parseInt(n*n/a,10),p=parseInt(d.scrollLeft()*n/a,10)):(i=0,p=0,d.scrollLeft(0)),c>s?(u=parseInt(s*s/c,10),f=parseInt(d.scrollTop()*s/c,10)):(u=0,f=0,d.scrollTop(0)),f>=s-u&&(f=s-u),p>=n-i&&(p=n-i),g.css({left:p+d.scrollLeft(),bottom:b-d.scrollTop(),width:i}),v.css({top:f+d.scrollTop(),right:m-d.scrollLeft(),height:u})},P=function(e,t){var r=e+t,o=n-i;p=0>r?0:r>o?o:r,g.css({left:p+d.scrollLeft()})},I=function(e,t){var r=e+t,o=s-u;f=0>r?0:r>o?o:r,v.css({top:f+d.scrollTop()})},L=function(){var t,r;g.bind("mousedown.perfect-scroll",function(e){r=e.pageX,t=g.position().left,g.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),e(document).bind("mousemove.perfect-scroll",function(e){g.hasClass("in-scrolling")&&(P(t,e.pageX-r),T(),e.stopPropagation(),e.preventDefault())}),e(document).bind("mouseup.perfect-scroll",function(){g.hasClass("in-scrolling")&&g.removeClass("in-scrolling")})},C=function(){var t,r;v.bind("mousedown.perfect-scroll",function(e){r=e.pageY,t=v.position().top,v.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),e(document).bind("mousemove.perfect-scroll",function(e){v.hasClass("in-scrolling")&&(I(t,e.pageY-r),w(),e.stopPropagation(),e.preventDefault())}),e(document).bind("mouseup.perfect-scroll",function(){v.hasClass("in-scrolling")&&v.removeClass("in-scrolling")})},X=function(){var e=function(e,t){var r=d.scrollTop();if(0===r&&t>0&&0===e)return!l.wheelPropagation;if(r>=c-s&&0>t&&0===e)return!l.wheelPropagation;var o=d.scrollLeft();return 0===o&&0>e&&0===t?!l.wheelPropagation:o>=a-n&&e>0&&0===t?!l.wheelPropagation:!0};d.mousewheel(function(t,r,o,n){d.scrollTop(d.scrollTop()-n*l.wheelSpeed),d.scrollLeft(d.scrollLeft()+o*l.wheelSpeed),y(),e(o,n)&&t.preventDefault()})},Y=function(){var e=function(e,t){d.scrollTop(d.scrollTop()-t),d.scrollLeft(d.scrollLeft()-e),y()},t={},r=0,o={},l=null;d.bind("touchstart.perfect-scroll",function(e){var o=e.originalEvent.targetTouches[0];t.pageX=o.pageX,t.pageY=o.pageY,r=(new Date).getTime(),null!==l&&clearInterval(l)}),d.bind("touchmove.perfect-scroll",function(l){var n=l.originalEvent.targetTouches[0],s={};s.pageX=n.pageX,s.pageY=n.pageY;var a=s.pageX-t.pageX,c=s.pageY-t.pageY;e(a,c),t=s;var i=(new Date).getTime();o.x=a/(i-r),o.y=c/(i-r),r=i}),d.bind("touchend.perfect-scroll",function(){l=setInterval(function(){return.01>Math.abs(o.x)&&.01>Math.abs(o.y)?(clearInterval(l),void 0):(e(30*o.x,30*o.y),o.x*=.8,o.y*=.8,void 0)},10)})},x=function(){g.remove(),v.remove(),d.unbind("mousewheel"),d.unbind("touchstart.perfect-scroll"),d.unbind("touchmove.perfect-scroll"),d.unbind("touchend.perfect-scroll"),e(window).unbind("mousemove.perfect-scroll"),e(window).unbind("mouseup.perfect-scroll"),d.data("perfect-scrollbar",null),d.data("perfect-scrollbar-update",null),d.data("perfect-scrollbar-destroy",null)},D=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent),S=function(){y(),L(),C(),D&&Y(),d.mousewheel&&X(),d.data("perfect-scrollbar",d),d.data("perfect-scrollbar-update",y),d.data("perfect-scrollbar-destroy",x)};return S(),d}})(jQuery);